# OpenCNPJ Dart Wrapper - Project Context

This document provides an overview of the `opencnpj` Dart package, its purpose, and implementation details.

## Purpose
The `opencnpj` package is a pure Dart client library designed to facilitate integration with the [OpenCNPJ API](https://opencnpj.org/). Its primary goal is to provide a strongly-typed, easy-to-use interface for querying public data about Brazilian companies using their CNPJ.

## Implementation Details

### Architecture
The package follows a clean, layered architecture:
-   **Client (`OpenCNPJ`):** The main entry point for API interactions. It handles HTTP requests, URL construction, and error management. It can be instantiated with an optional `http.Client` for better testability and custom base URLs.
-   **Models (`Company`, `Phone`, `Partner`):** These are immutable Dart classes that represent the JSON response structures from the OpenCNPJ API. They are built using `json_annotation` and `json_serializable` for robust JSON serialization and deserialization, automatically handling `snake_case` to `camelCase` mapping.
-   **Exceptions (`InvalidCNPJException`, `NotFoundException`, `OpenCNPJException`):** Custom exceptions are defined to provide semantic error handling, allowing consuming applications to react specifically to different API error conditions (e.g., invalid input, company not found, or generic API/network issues).

### Key Features:
-   **CNPJ Sanitization:** Automatically cleans CNPJ input strings by removing non-numeric characters before making API requests, ensuring compatibility with the API's expected format.
-   **Error Handling:** Provides specific exceptions for 404 (Not Found), invalid CNPJ format, and general API/network errors.
-   **Testability:** Designed with dependency injection for the `http.Client`, making it easy to mock HTTP responses in unit tests.
-   **Strongly Typed:** All API responses are mapped to Dart objects, providing compile-time safety and a better developer experience.

### File Layout

```
opencnpj/
├── lib/
│   ├── src/
│   │   ├── client.dart             # OpenCNPJ client implementation
│   │   ├── exceptions/             # Custom exception classes
│   │   │   └── exceptions.dart
│   │   └── models/                 # Data models for API responses
│   │       ├── company.dart
│   │       └── company.g.dart      # Generated by json_serializable
│   └── opencnpj.dart               # Main export file
├── example/
│   └── main.dart                 # Example usage of the package
├── test/
│   ├── client_test.dart          # Unit tests for the OpenCNPJ client
│   └── models_test.dart          # Unit tests for the data models
├── pubspec.yaml                  # Package dependencies and metadata
├── README.md                     # Project overview and usage guide
├── CHANGELOG.md                  # Version history
├── DESIGN.md                     # Design document of the package
└── IMPLEMENTATION.md             # Implementation plan and journal
```
